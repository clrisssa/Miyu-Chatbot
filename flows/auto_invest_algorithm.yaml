name: auto_invest_algorithm
states:
    stop_schedule_state:
        component: meya.schedule_stop
        properties:
            tag: schedule
    check_user:
        component: meya.conditional_exists
        properties:
            scope: user
            key: email
        transitions:
            exists: is_user
            notexists: is_non_user
        delay:
            relative: 3
    is_user:
        component: meya.text
        properties:
            text: You can read more about how our auto invest algorithm works in this article! https://intercom.help/funding-societies/investing-with-funding-societies/understanding-our-auto-invest-20-algorithm
        delay:
            relative: 2
        transitions:
            next: anything_else_schedule
    is_non_user:
        component: meya.text
        properties:
            text: Our auto investment function works by running through all the filters to see which investors have the settings that matches the loan.
        delay:
            relative: 2
        transitions:
            next: anything_else_schedule
    anything_else_schedule:
        flow: anything_else_schedule